
#define uint16  unsigned short
#define uint32  unsigned int

#define UINT32  *(volatile uint32*)

#define AHB_TIMER_LIMIT UINT32 0x52000000
#define AHB_TIMER_CTRL  UINT32 0x52000008
#define AHB_DA2         UINT32 0x55000000

#define LIMIT           0x00000063
#define CONTROL         0x00000007
#define NUM_SAMPLES     500

volatile static uint16 ind = 0;
volatile static uint16 sin[NUM_SAMPLES] = {
0x800,0x819,0x833,0x84d,0x866,0x880,0x89a,0x8b3,0x8cd,0x8e7,0x900,0x91a,0x933,0x94c,0x966,0x97f,0x998,0x9b2,0x9cb,0x9e4,
0x9fd,0xa16,0xa2e,0xa47,0xa60,0xa78,0xa91,0xaa9,0xac1,0xad9,0xaf1,0xb09,0xb21,0xb38,0xb50,0xb67,0xb7e,0xb96,0xbac,0xbc3,
0xbda,0xbf0,0xc07,0xc1d,0xc33,0xc49,0xc5e,0xc74,0xc89,0xc9e,0xcb3,0xcc8,0xcdc,0xcf1,0xd05,0xd19,0xd2c,0xd40,0xd53,0xd66,
0xd79,0xd8c,0xd9e,0xdb0,0xdc2,0xdd4,0xde6,0xdf7,0xe08,0xe19,0xe29,0xe39,0xe49,0xe59,0xe69,0xe78,0xe87,0xe96,0xea4,0xeb2,
0xec0,0xece,0xedb,0xee8,0xef5,0xf02,0xf0e,0xf1a,0xf26,0xf31,0xf3c,0xf47,0xf51,0xf5c,0xf66,0xf6f,0xf79,0xf82,0xf8a,0xf93,
0xf9b,0xfa3,0xfaa,0xfb1,0xfb8,0xfbf,0xfc5,0xfcb,0xfd0,0xfd6,0xfdb,0xfdf,0xfe4,0xfe8,0xfeb,0xfef,0xff2,0xff5,0xff7,0xff9,
0xffb,0xffc,0xffe,0xffe,0xfff,0xfff,0xfff,0xffe,0xffe,0xffc,0xffb,0xff9,0xff7,0xff5,0xff2,0xfef,0xfeb,0xfe8,0xfe4,0xfdf,
0xfdb,0xfd6,0xfd0,0xfcb,0xfc5,0xfbf,0xfb8,0xfb1,0xfaa,0xfa3,0xf9b,0xf93,0xf8a,0xf82,0xf79,0xf6f,0xf66,0xf5c,0xf51,0xf47,
0xf3c,0xf31,0xf26,0xf1a,0xf0e,0xf02,0xef5,0xee8,0xedb,0xece,0xec0,0xeb2,0xea4,0xe96,0xe87,0xe78,0xe69,0xe59,0xe49,0xe39,
0xe29,0xe19,0xe08,0xdf7,0xde6,0xdd4,0xdc2,0xdb0,0xd9e,0xd8c,0xd79,0xd66,0xd53,0xd40,0xd2c,0xd19,0xd05,0xcf1,0xcdc,0xcc8,
0xcb3,0xc9e,0xc89,0xc74,0xc5e,0xc49,0xc33,0xc1d,0xc07,0xbf0,0xbda,0xbc3,0xbac,0xb96,0xb7e,0xb67,0xb50,0xb38,0xb21,0xb09,
0xaf1,0xad9,0xac1,0xaa9,0xa91,0xa78,0xa60,0xa47,0xa2e,0xa16,0x9fd,0x9e4,0x9cb,0x9b2,0x998,0x97f,0x966,0x94c,0x933,0x91a,
0x900,0x8e7,0x8cd,0x8b3,0x89a,0x880,0x866,0x84d,0x833,0x819,0x800,0x7e6,0x7cc,0x7b2,0x799,0x77f,0x765,0x74c,0x732,0x718,
0x6ff,0x6e5,0x6cc,0x6b3,0x699,0x680,0x667,0x64d,0x634,0x61b,0x602,0x5e9,0x5d1,0x5b8,0x59f,0x587,0x56e,0x556,0x53e,0x526,
0x50e,0x4f6,0x4de,0x4c7,0x4af,0x498,0x481,0x469,0x453,0x43c,0x425,0x40f,0x3f8,0x3e2,0x3cc,0x3b6,0x3a1,0x38b,0x376,0x361,
0x34c,0x337,0x323,0x30e,0x2fa,0x2e6,0x2d3,0x2bf,0x2ac,0x299,0x286,0x273,0x261,0x24f,0x23d,0x22b,0x219,0x208,0x1f7,0x1e6,
0x1d6,0x1c6,0x1b6,0x1a6,0x196,0x187,0x178,0x169,0x15b,0x14d,0x13f,0x131,0x124,0x117,0x10a,0xfd,0xf1,0xe5,0xd9,0xce,
0xc3,0xb8,0xae,0xa3,0x99,0x90,0x86,0x7d,0x75,0x6c,0x64,0x5c,0x55,0x4e,0x47,0x40,0x3a,0x34,0x2f,0x29,
0x24,0x20,0x1b,0x17,0x14,0x10,0xd,0xa,0x8,0x6,0x4,0x3,0x1,0x1,0x0,0x0,0x0,0x1,0x1,0x3,
0x4,0x6,0x8,0xa,0xd,0x10,0x14,0x17,0x1b,0x20,0x24,0x29,0x2f,0x34,0x3a,0x40,0x47,0x4e,0x55,0x5c,
0x64,0x6c,0x75,0x7d,0x86,0x90,0x99,0xa3,0xae,0xb8,0xc3,0xce,0xd9,0xe5,0xf1,0xfd,0x10a,0x117,0x124,0x131,
0x13f,0x14d,0x15b,0x169,0x178,0x187,0x196,0x1a6,0x1b6,0x1c6,0x1d6,0x1e6,0x1f7,0x208,0x219,0x22b,0x23d,0x24f,0x261,0x273,
0x286,0x299,0x2ac,0x2bf,0x2d3,0x2e6,0x2fa,0x30e,0x323,0x337,0x34c,0x361,0x376,0x38b,0x3a1,0x3b6,0x3cc,0x3e2,0x3f8,0x40f,
0x425,0x43c,0x453,0x469,0x481,0x498,0x4af,0x4c7,0x4de,0x4f6,0x50e,0x526,0x53e,0x556,0x56e,0x587,0x59f,0x5b8,0x5d1,0x5e9,
0x602,0x61b,0x634,0x64d,0x667,0x680,0x699,0x6b3,0x6cc,0x6e5,0x6ff,0x718,0x732,0x74c,0x765,0x77f,0x799,0x7b2,0x7cc,0x7e6
};

void Timer_Handler() {
    AHB_DA2 = sin[ind];
    ind = (ind + 1) % NUM_SAMPLES;
}

int main(void) {
    AHB_TIMER_LIMIT = LIMIT;
    AHB_TIMER_CTRL  = CONTROL;
    while(1) {}
}
